<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Partidos en Vivo - Actualiza para ver m√°s</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <meta name="referrer" content="no-referrer-when-downgrade">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: white;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
        }
        header {
            background-color: #232323;
            padding: 15px;
            text-align: center;
            margin-bottom: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        h1 {
            margin: 0;
            color: #f1c40f;
            font-size: 24px;
        }
        .ad-container {
            margin: 15px auto;
            text-align: center;
            overflow: hidden;
            min-height: 100px;
            background-color: rgba(255,255,255,0.05);
            border: 1px dashed #f1c40f;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        .ad-container:hover {
            background-color: rgba(255,255,255,0.1);
            transform: scale(1.01);
        }
        .ad-banner {
            width: 100%;
            margin: 0 auto;
            display: block;
            text-align: center;
        }
        .partidos {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        .partido {
            background-color: #232323;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            border: 1px solid #333;
        }
        .partido:hover {
            background-color: #333;
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .partido h3 {
            margin-top: 0;
            color: #f1c40f;
        }
        .partido .tiempo {
            color: #999;
            font-size: 14px;
            margin-bottom: 10px;
        }
        .partido video {
            width: 100%;
            display: none;
            margin-top: 15px;
            border-radius: 5px;
        }
        footer {
            background-color: #232323;
            text-align: center;
            padding: 15px;
            margin-top: 20px;
            color: #888;
            border-radius: 8px;
        }
        .partido.active {
            border: 2px solid #f1c40f;
            background-color: #2c2c2c;
        }
        .live-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #e74c3c;
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 12px;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        .ad-notice {
            font-size: 10px;
            color: #999;
            margin-top: 3px;
            font-style: italic;
        }
        .support-message {
            text-align: center;
            margin: 10px 0;
            padding: 10px;
            background-color: rgba(241, 196, 15, 0.1);
            border-radius: 8px;
            font-size: 14px;
        }
        iframe {
            border: 0;
            max-width: 100%;
        }
        .refresh-button {
            display: block;
            width: 80%;
            margin: 15px auto;
            padding: 12px;
            background-color: #f1c40f;
            color: #232323;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .refresh-button:hover {
            background-color: #f39c12;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Partidos en Vivo - Actualiza para ver m√°s</h1>
        </header>
        
        <div class="support-message">
            Los anuncios nos ayudan a mantener este servicio gratuito. ¬°Gracias por tu apoyo!
        </div>
        
        <button class="refresh-button" onclick="window.location.reload()">
            üîÑ ACTUALIZAR PARA VER TODOS LOS PARTIDOS
        </button>
        
        <!-- Anuncio Superior (banner) -->
        <div class="ad-container" id="ad-top">
            <div class="ad-banner">
                <script type="text/javascript">
                    atOptions = {
                        'key': 'b330ccd204185aee9ef640adccf896d2',
                        'format': 'iframe',
                        'height': 90,
                        'width': 728,
                        'params': {}
                    };
                    document.write('<scr' + 'ipt type="text/javascript" src="//www.highperformanceformat.com/b330ccd204185aee9ef640adccf896d2/invoke.js"></scr' + 'ipt>');
                </script>
            </div>
            <div class="ad-notice">Anuncio - Apoya nuestro servicio</div>
        </div>
        
        <div class="partidos">
            <div class="partido" onclick="cargarPartido(this, 'https://agl2zq.fubohd.com/goltv/mono.m3u8?token=e213a675aa16af4e9e00bd29a9bbe24ab00fce39-5e-1742281499-1742245499')">
                <div class="live-indicator">EN VIVO</div>
                <h3>17:00pm</h3>
                <div class="tiempo">Primera Division: Cerro Largo vs Cerro</div>
                <video controls></video>
            </div>

            <div class="partido" onclick="cargarPartido(this, 'https://b2zmawnpyww.fubohd.com/tntsports/mono.m3u8?token=6271cfc7e362bfdc34fb8b39a30a14f8528b1d0f-c9-1742283649-1742247649')">
                <div class="live-indicator">EN VIVO</div>
                <h3>17:00pm</h3>
                <div class="tiempo">Primera Division: Tigre vs Central C√≥rdoba SdE</div>
                <video controls></video>
            </div>

            <div class="partido" onclick="cargarPartido(this, 'https://y2fzdgxl.fubohd.com/espn4/mono.m3u8?token=132a4fa5f07f3b379acae9a3b9a0cca2941ddcea-9e-1742179219-1742143219')">
                <div class="live-indicator">EN VIVO</div>
                <h3>17:00pm</h3>
                <div class="tiempo">Primera Division: Uni√≥n Santa Fe vs Banfield</div>
                <video controls></video>
            </div>

            <div class="partido" onclick="cargarPartido(this, 'https://b2zmawnpyww.fubohd.com/espn/mono.m3u8?token=86a11826dd06833697db331e0a1278d310efb930-a8-1742283974-1742247974')">
                <div class="live-indicator">EN VIVO</div>
                <h3>18:00pm</h3>
                <div class="tiempo">Sorteo: Copa Libertadores y Copa sudamericana</div>
                <video controls></video>
            </div>
        </div>
        
        <!-- Anuncio Container Central -->
        <div class="ad-container" id="ad-mid">
            <script async="async" data-cfasync="false" src="//pl26063295.effectiveratecpm.com/2537ae2ea8b16bc9e554273a94dfd098/invoke.js"></script>
            <div id="container-2537ae2ea8b16bc9e554273a94dfd098"></div>
            <div class="ad-notice">Anuncio - Haz clic para apoyarnos</div>
        </div>
        
        <div class="partidos">
            <div class="partido" onclick="cargarPartido(this, 'https://cgxheq.fubohd.com/premiere1/mono.m3u8?token=3cdd8797c7563b6d72aca836a9b898c3a2200166-c6-1742186152-1742150152')">
                <div class="live-indicator">EN VIVO</div>
                <h3>19:00pm</h3>
                <div class="tiempo">Primera Division: T√©cnico Universitario vs Barcelona</div>
                <video controls></video>
            </div>

            <div class="partido" onclick="cargarPartido(this, 'https://dglvz29s.fubohd.com/espnpremium/tracks-v1a1/mono.m3u8?token=8ebdf07dae24053ef82078c0254f87f163c6cd83-7d-1742186431-1742150431')">
                <div class="live-indicator">EN VIVO</div>
                <h3>19:15pm</h3>
                <div class="tiempo">Primera Division: River Plate vs Boston River</div>
                <video controls></video>
            </div>

            <div class="partido" onclick="cargarPartido(this, 'https://bmv3.fubohd.com/espndeportes/mono.m3u8?token=b80af0a14674f2f089b0c6b0544c47429ca684af-ef-1742193821-1742157821')">
                <div class="live-indicator">EN VIVO</div>
                <h3>19:15pm</h3>
                <div class="tiempo">Primera Division: Atl√©tico Tucum√°n vs V√©lez Sarsfield</div>
                <video controls></video>
            </div>
        </div>
        
        <button class="refresh-button" onclick="mostrarMasPartidos()">
            üëâ VER M√ÅS PARTIDOS DISPONIBLES üëà
        </button>
        
        <!-- Anuncio Inferior -->
        <div class="ad-container" id="ad-bottom">
            <script type='text/javascript' src='//pl26063307.effectiveratecpm.com/19/09/91/1909913ee893cee324321a2b56c090fa.js'></script>
            <div class="ad-notice">Anuncio - Gracias por tu apoyo</div>
        </div>
        
        <footer>
            &copy; 2025 Partidos en Vivo - Todos los derechos reservados
        </footer>
    </div>
    
    <script>
        // Variable para mantener la instancia actual de HLS
        let currentHls = null;
        let lastActivePartido = null;
        let adClickCount = 0;
        
        // Aseguramos que los bloqueadores de anuncios no afecten
        document.addEventListener('DOMContentLoaded', function() {
            cargarTodosLosAnuncios();
            detectarBloqueadorAnuncios();
            
            // Enfatizar anuncios peri√≥dicamente
            setInterval(enfatizarAnuncios, 10000);
        });
        
        function cargarTodosLosAnuncios() {
            // Intenta cargar anuncios cada 30 segundos
            setInterval(function() {
                try {
                    // Cargar script container
                    var scriptContainer = document.createElement('script');
                    scriptContainer.async = true;
                    scriptContainer.setAttribute('data-cfasync', 'false');
                    scriptContainer.src = '//pl26063295.effectiveratecpm.com/2537ae2ea8b16bc9e554273a94dfd098/invoke.js';
                    document.getElementById('ad-mid').appendChild(scriptContainer);
                    
                    // Cargar otro script de anuncios
                    var scriptAds = document.createElement('script');
                    scriptAds.type = 'text/javascript';
                    scriptAds.src = '//pl26063313.effectiveratecpm.com/93/61/3d/93613d042ce505fe468e829efbb21520.js';
                    document.body.appendChild(scriptAds);
                } catch (e) {
                    console.error("Error al cargar scripts adicionales:", e);
                }
            }, 30000);
        }
        
        function detectarBloqueadorAnuncios() {
            // Comprobar si los anuncios est√°n bloqueados
            setTimeout(function() {
                const adContainers = document.querySelectorAll('.ad-container');
                let adsVisible = false;
                
                adContainers.forEach(container => {
                    if (container.offsetHeight > 10 && container.innerHTML.trim() !== '') {
                        adsVisible = true;
                    }
                });
                
                if (!adsVisible) {
                    console.log("Posible bloqueador de anuncios detectado");
                    mostrarMensajeDesbloqueo();
                }
            }, 3000);
        }
        
        function mostrarMensajeDesbloqueo() {
            const mensaje = document.createElement('div');
            mensaje.innerHTML = '<div style="padding: 20px; background-color: #f39c12; color: #000; text-align: center; margin: 20px 0; border-radius: 8px;"><strong>‚ö†Ô∏è Para una mejor experiencia, por favor desactiva tu bloqueador de anuncios ‚ö†Ô∏è</strong><br>Nos ayuda a mantener este servicio gratuito. ¬°Gracias!</div>';
            document.querySelector('.container').insertBefore(mensaje, document.querySelector('.partidos'));
        }
        
        function enfatizarAnuncios() {
            const adContainers = document.querySelectorAll('.ad-container');
            adContainers.forEach(container => {
                container.style.animation = 'pulse 1s';
                setTimeout(() => {
                    container.style.animation = '';
                }, 1000);
            });
        }
        
        function cargarPartido(elemento, url) {
            // Incrementar contador de interacciones que podr√≠an llevar a anuncios
            adClickCount++;
            
            // Mayor probabilidad de mostrar anuncios con cada interacci√≥n
            if (adClickCount % 2 === 0) {
                activarAnunciosPorClick();
            }
            
            // Restablecer estilo del partido anterior
            if (lastActivePartido) {
                lastActivePartido.classList.remove('active');
                const lastVideo = lastActivePartido.querySelector('video');
                lastVideo.pause();
                lastVideo.style.display = 'none';
                
                if (currentHls) {
                    currentHls.destroy();
                    currentHls = null;
                }
            }
            
            // Activar el partido actual
            elemento.classList.add('active');
            lastActivePartido = elemento;
            
            // Obtener el elemento de video dentro del partido
            const video = elemento.querySelector('video');
            
            // Intentar cargar popunders antes de reproducir el video
            cargarPopunder();
            
            // Activar otros tipos de anuncios
            activarAnunciosPorClick();
            
            // Reproducir el video
            if (Hls.isSupported()) {
                // A√±adir un retraso breve para asegurar que se muestren los anuncios
                setTimeout(() => {
                    currentHls = new Hls();
                    currentHls.loadSource(url);
                    currentHls.attachMedia(video);
                    currentHls.on(Hls.Events.MANIFEST_PARSED, () => {
                        video.style.display = 'block';
                        video.play().catch(e => {
                            console.log('Error al iniciar reproducci√≥n autom√°tica:', e);
                            mostrarMensajeInteractivo(elemento);
                        });
                    });
                    
                    currentHls.on(Hls.Events.ERROR, function(event, data) {
                        if (data.fatal) {
                            console.error('Error fatal de HLS:', data);
                            elemento.innerHTML += '<div style="padding: 10px; background: rgba(231, 76, 60, 0.8); color: white; border-radius: 5px; margin-top: 10px;">‚ö†Ô∏è Si el partido no se ve, espera 5 minutos y <a href="#" onclick="window.location.reload()" style="color: white; text-decoration: underline;">actualiza la p√°gina</a>.</div>';
                        }
                    });
                }, 500);
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = url;
                video.style.display = 'block';
                video.addEventListener('loadedmetadata', () => {
                    video.play().catch(e => console.log('Error al reproducir en Safari:', e));
                });
            } else {
                alert('Tu navegador no soporta la reproducci√≥n de estos videos');
            }
            
            // Desplazarse hasta el partido seleccionado
            elemento.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            // Mostrar anuncio central despu√©s de cargar un partido
            enfatizarAnuncios();
        }
        
        function mostrarMensajeInteractivo(elemento) {
            const mensajeDiv = document.createElement('div');
            mensajeDiv.innerHTML = '<div style="padding: 12px; background: rgba(241, 196, 15, 0.8); color: black; border-radius: 5px; margin-top: 10px; cursor: pointer;" onclick="this.parentNode.removeChild(this); document.querySelector(\'video\').play();">üëÜ Haz clic aqu√≠ para iniciar el video üëÜ</div>';
            elemento.appendChild(mensajeDiv);
        }
        
        function cargarPopunder() {
            try {
                var script = document.createElement('script');
                script.type = 'text/javascript';
                script.src = '//pl26063307.effectiveratecpm.com/19/09/91/1909913ee893cee324321a2b56c090fa.js';
                document.body.appendChild(script);
                
                // Intentar m√°s tarde para evitar bloqueos
                setTimeout(() => {
                    var script2 = document.createElement('script');
                    script2.type = 'text/javascript';
                    script2.src = '//pl26063313.effectiveratecpm.com/93/61/3d/93613d042ce505fe468e829efbb21520.js';
                    document.body.appendChild(script2);
                }, 5000);
            } catch (e) {
                console.error("Error al cargar popunder:", e);
            }
        }

        function activarAnunciosPorClick() {
            // Activar todos los anuncios con un solo clic
            document.querySelectorAll('.ad-container').forEach(container => {
                // Forzar carga de anuncios
                container.style.opacity = '0.99';
                setTimeout(() => {
                    container.style.opacity = '1';
                }, 100);
                
                // A√±adir efecto visual para atraer atenci√≥n
                container.style.boxShadow = '0 0 10px rgba(241, 196, 15, 0.7)';
                setTimeout(() => {
                    container.style.boxShadow = 'none';
                }, 2000);
            });
            
            try {
                // Cargar script container
                var scriptContainer = document.createElement('script');
                scriptContainer.async = true;
                scriptContainer.setAttribute('data-cfasync', 'false');
                scriptContainer.src = '//pl26063295.effectiveratecpm.com/2537ae2ea8b16bc9e554273a94dfd098/invoke.js';
                document.getElementById('ad-mid').appendChild(scriptContainer);
            } catch (e) {
                console.error("Error al cargar scripts adicionales:", e);
            }
        }
        
        function mostrarMasPartidos() {
            // Simular carga de m√°s partidos mientras se muestran anuncios
            const boton = event.target;
            boton.innerHTML = "‚è≥ Cargando m√°s partidos...";
            boton.disabled = true;
            
            // Mostrar anuncios mientras "carga"
            activarAnunciosPorClick();
            cargarPopunder();
            
            // Redireccionar despu√©s de una breve espera para permitir que los anuncios se carguen
            setTimeout(() => {
                window.location.reload();
            }, 2000);
        }

        // Inicializar la p√°gina
        window.addEventListener('load', function() {
            // Mostrar anuncios peri√≥dicamente
            setInterval(function() {
                enfatizarAnuncios();
                activarAnunciosPorClick();
            }, 60000);
            
            // Agregar eventos aleatorios para mejorar visibilidad de anuncios
            document.querySelectorAll('.partido').forEach(partido => {
                partido.addEventListener('mouseover', function() {
                    if (Math.random() > 0.7) {
                        enfatizarAnuncios();
                    }
                });
            });
        });
    </script>
</body>
</html>
